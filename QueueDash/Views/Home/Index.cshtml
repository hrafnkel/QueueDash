@inherits System.Web.Mvc.WebViewPage

@{
	Layout = null;
}

<!DOCTYPE html>
<script src="~/scripts/jquery-1.9.1.js"></script>
<script src="~/scripts/jquery.signalR-2.1.2.js"></script>
<script src="~/scripts/knockout-3.4.0.js"></script>
<script src="/signalr/hubs"></script>
<html>
<head>
	<title>Queue Thing</title>
</head>
<body>
<h1>Dynamic Queue Details</h1>
<div>
	<p>Status:</p>

	<ul id="status">
		<li>Loading hub...</li>
	</ul>
</div>
</body>
</html>

<script>
	$(function () {
		var hub = $.connection.dashHub;
		//window.registerClientMethods(hub);

		$.connection.hub.start()
			.done(function () {
				$("#status").children().first().text("Hub loaded.");
				hub.server.hello()
					.done(function(queues) {
						$.each(queues,
							function() {
								alert(this.Name + ' ' + this.Depth);
							});
					});
			})
			.fail(function () {
         		$("#status").children().first().text("Hub failed");});
	})
</script>